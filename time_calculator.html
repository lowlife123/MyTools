<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时间间隔计算器</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center py-10 px-4">

    <!-- Navigation Back Link -->
    <div class="w-full max-w-2xl mb-6">
        <a href="index.html" class="inline-flex items-center text-blue-600 hover:text-blue-800 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd" />
            </svg>
            返回首页
        </a>
    </div>

    <div class="w-full max-w-2xl bg-white rounded-xl shadow-lg p-8">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">⏳ 时间间隔计算器</h1>

        <div class="space-y-8">
            <!-- Start Time -->
            <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-1">开始时间</label>
                <div class="flex gap-2">
                    <input type="datetime-local" id="startTime" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2 text-lg" step="1">
                    <button onclick="setNow('startTime')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400 whitespace-nowrap transition-colors">
                        当前时间
                    </button>
                </div>
            </div>

            <!-- End Time -->
            <div class="relative">
                <label class="block text-sm font-medium text-gray-700 mb-1">结束时间</label>
                <div class="flex gap-2">
                    <input type="datetime-local" id="endTime" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 border p-2 text-lg" step="1">
                    <button onclick="setNow('endTime')" class="px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-400 whitespace-nowrap transition-colors">
                        当前时间
                    </button>
                </div>
            </div>

            <!-- Calculate Button -->
            <button onclick="calculateDiff()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 px-4 rounded-lg shadow transition duration-150 ease-in-out text-lg">
                计算间隔
            </button>

            <!-- Results -->
            <div id="resultContainer" class="hidden bg-blue-50 rounded-xl p-6 border border-blue-100">
                <h3 class="text-lg font-semibold text-blue-900 mb-4 border-b border-blue-200 pb-2">计算结果</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <span class="block text-sm text-gray-500 uppercase tracking-wide">总天数</span>
                        <span id="resDays" class="block text-2xl font-bold text-blue-600 mt-1">0</span>
                        <span class="text-xs text-gray-400">Days</span>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <span class="block text-sm text-gray-500 uppercase tracking-wide">总小时数</span>
                        <span id="resHours" class="block text-2xl font-bold text-blue-600 mt-1">0</span>
                        <span class="text-xs text-gray-400">Hours</span>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm">
                        <span class="block text-sm text-gray-500 uppercase tracking-wide">总秒数</span>
                        <span id="resSeconds" class="block text-2xl font-bold text-blue-600 mt-1">0</span>
                        <span class="text-xs text-gray-400">Seconds</span>
                    </div>
                </div>

                <div class="mt-6 pt-4 border-t border-blue-200">
                    <p class="text-sm text-gray-600 mb-1">详细时间差：</p>
                    <p id="resDetailed" class="text-xl font-mono text-gray-900 bg-white/50 p-2 rounded">
                        0 天 0 小时 0 分 0 秒
                    </p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Helper to format date for datetime-local input (YYYY-MM-DDTHH:mm:ss)
        function formatLocalISOString(date) {
            const pad = (num) => (num < 10 ? '0' : '') + num;
            const year = date.getFullYear();
            const month = pad(date.getMonth() + 1);
            const day = pad(date.getDate());
            const hours = pad(date.getHours());
            const minutes = pad(date.getMinutes());
            const seconds = pad(date.getSeconds());
            return `${year}-${month}-${day}T${hours}:${minutes}:${seconds}`;
        }

        function setNow(inputId) {
            const now = new Date();
            document.getElementById(inputId).value = formatLocalISOString(now);
        }

        function calculateDiff() {
            const startVal = document.getElementById('startTime').value;
            const endVal = document.getElementById('endTime').value;

            if (!startVal || !endVal) {
                alert("请先选择开始时间和结束时间");
                return;
            }

            const start = new Date(startVal);
            const end = new Date(endVal);

            // Calculate difference in milliseconds
            let diffMs = end - start;
            
            // Handle negative difference (if end is before start)
            const isNegative = diffMs < 0;
            diffMs = Math.abs(diffMs);

            // Conversions
            const totalSeconds = (diffMs / 1000).toFixed(0);
            const totalMinutes = (diffMs / (1000 * 60)).toFixed(1);
            const totalHours = (diffMs / (1000 * 60 * 60)).toFixed(2);
            const totalDays = (diffMs / (1000 * 60 * 60 * 24)).toFixed(2);

            // Detailed breakdown
            const seconds = Math.floor((diffMs / 1000) % 60);
            const minutes = Math.floor((diffMs / (1000 * 60)) % 60);
            const hours = Math.floor((diffMs / (1000 * 60 * 60)) % 24);
            const days = Math.floor(diffMs / (1000 * 60 * 60 * 24));

            // Update UI
            const prefix = isNegative ? "- " : "";
            
            document.getElementById('resDays').textContent = prefix + totalDays;
            document.getElementById('resHours').textContent = prefix + totalHours;
            document.getElementById('resSeconds').textContent = prefix + totalSeconds;

            document.getElementById('resDetailed').textContent = 
                `${prefix}${days} 天 ${hours} 小时 ${minutes} 分 ${seconds} 秒`;

            document.getElementById('resultContainer').classList.remove('hidden');
        }
    </script>
</body>
</html>
